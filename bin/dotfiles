#! /usr/bin/env bash

BIN_DIR=$(dirname "$(readlink -f "$0")")
ROOT_DIR=$(realpath "$BIN_DIR/../")
MODULES_DIR=$(realpath "$ROOT_DIR/modules")

. "$MODULES_DIR/helpers.sh"

_init() {
    printf "source <(dotfiles print_completions)\n"
}

_print_completions() {
    cat $ROOT_DIR/bin/_dotfiles
}

_self-update() {
    git -C "$ROOT_DIR" pull
}

_commit-and-push() {
    git -C "$ROOT_DIR" add . && git -C "$ROOT_DIR" commit -m "$1" && git -C "$ROOT_DIR" push
}

_run "$@"
